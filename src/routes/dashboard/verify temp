import { Box, Button, Typography, Grid, TextField, MenuItem } from "@mui/material";
import { useState } from "react";
import UploadFileIcon from '@mui/icons-material/UploadFile';
import CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';

const idTypes = [
  "Passport",
  "Driver's License",
  "National ID",
];

const Verify = () => {
  const [form, setForm] = useState({
    fullName: '',
    idType: '',
    idNumber: '',
    document: null,
  });
  const [submitted, setSubmitted] = useState(false);

  const handleChange = (e) => {
    const { name, value } = e.target;
    setForm((prev) => ({ ...prev, [name]: value }));
  };

  const handleFileChange = (e) => {
    setForm((prev) => ({ ...prev, document: e.target.files[0] }));
  };

  const handleSubmit = () => {
    // here you'd call your backend or service
    setSubmitted(true);
  };

  return (
    <Box display="flex" flexDirection="column" gap={3}>
      <Box>
        <Typography variant="h5" color="secondary.main" fontWeight="bold">
          KYC Verification
        </Typography>
        <Typography variant="body2" color="text.secondary">
          Complete the form below to verify your identity.
        </Typography>
      </Box>

      {!submitted ? (
        <Grid container spacing={3}>
          <Grid item xs={12} sm={6}>
            <TextField
              label="Full Name"
              name="fullName"
              fullWidth
              variant="outlined"
              value={form.fullName}
              onChange={handleChange}
              required
            />
          </Grid>

          <Grid item xs={12} sm={6}>
            <TextField
              select
              label="ID Type"
              name="idType"
              fullWidth
              value={form.idType}
              onChange={handleChange}
              required
            >
              {idTypes.map((option) => (
                <MenuItem key={option} value={option}>{option}</MenuItem>
              ))}
            </TextField>
          </Grid>

          <Grid item xs={12} sm={6}>
            <TextField
              label="ID Number"
              name="idNumber"
              fullWidth
              variant="outlined"
              value={form.idNumber}
              onChange={handleChange}
              required
            />
          </Grid>

          <Grid item xs={12} sm={6}>
            <Button
              component="label"
              variant="contained"
              fullWidth
              startIcon={<UploadFileIcon />}
              sx={{
                backgroundColor: "secondary.main",
                color: "#000",
                textTransform: "none",
              }}
            >
              Upload Document
              <input
                type="file"
                hidden
                accept="image/*,application/pdf"
                onChange={handleFileChange}
              />
            </Button>
            {form.document && (
              <Typography mt={1} variant="caption">
                Selected: {form.document.name}
              </Typography>
            )}
          </Grid>

          <Grid item xs={12}>
            <Button
              onClick={handleSubmit}
              variant="contained"
              fullWidth
              sx={{
                bgcolor: "background.default",
                color: "#fff",
                textTransform: "none",
                borderRadius: "8px",
              }}
            >
              Submit for Review
            </Button>
          </Grid>
        </Grid>
      ) : (
        <Box
          display="flex"
          flexDirection="column"
          alignItems="center"
          justifyContent="center"
          py={5}
          textAlign="center"
        >
          <CheckCircleOutlineIcon color="success" sx={{ fontSize: 50 }} />
          <Typography variant="h6" mt={2} fontWeight="bold">
            KYC Submitted Successfully
          </Typography>
          <Typography variant="body2" color="text.secondary" mt={1}>
            Our team will review your documents within 24–48 hours. You’ll receive a notification once it’s approved.
          </Typography>
        </Box>
      )}
    </Box>
  );
};

export default Verify;
